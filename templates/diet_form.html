<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Diet Recommender</title>
  <!-- ICONSCOUNT CDN -->
<link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">

<!-- GOOGLE FONTS (MONTSERRAT) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<!-- STYLESHEET -->
<link rel="stylesheet" href="{{url_for('static',filename='css/diet_form.css')}}" />
<style>  h3{
  text-align: center;
  margin-bottom: 40px;
  color: #777;
 } label {
      color: #777;
      font-weight: bold;
      display: block;
    }
</style>
</head>

<body>
  <nav>
    <div class="container nav__container" style="justify-content: space-evenly;">
      <a href="index.html">
        <img src="{{url_for('static',filename='img/logo.PNG')}}" style="background-size: contain; height: 75px; width: 75px; border-radius: 50%;">
      </a>
      <a href="index.html"><h4>PrediCure</h4></a>
      <ul class="nav__menu">
        <li><input type="text" id="search-box" placeholder="Search"></li>
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="obesity_imp.html">Obesity</a></li>
        <li><a href="diabetes_imp.html">Diabetes</a></li>
        <li><a href="NutriGuide_imp.html">NutriGuide</a></li>
        <li><a href="help.html">Help</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <button id="open-menu-btn"><i class="uil uil-bars"></i></button>
      <button id="close-menu-btn"><i class="uil uil-multiply"></i></button>
    </div>
  </nav>
  <!-- =============================== END OF NAVBAR ============================================================== -->
  <!--<h1>Diabetes Dataset</h1>
  <div class="form-container">
    <div class="form-item">
      <label for="Pregnancies">Number of times pregnant:</label>
      <input type="number" id="Pregnancies" name="Pregnancies" min="0" max="17" required>
      <label for="Glucose">Plasma glucose concentration:</label>
      <input type="number" id="Glucose" name="Glucose" min="0" max="199">
    </div>

    <div class="form-item">
      <label for="BP">Blood Pressure (in mm Hg):</label>
      <input type="number" id="BP" name="BP" min="0" max="122">
      <label for="SkinThickness">Triceps skin fold thickness (mm):</label>
      <input type="number" id="SkinThickness" name="SkinThickness">
    </div>
    <div class="form-item">
      <label for="Insulin">2-Hour serum insulin (mu U/ml):</label>
      <input type="number" id="Insulin" name="Insulin" min="0" max="846">
      <label for="BMI">Body mass index (weight in kg/(height in m)^2:</label>
      <input type="number" id="BMI" name="BMI"> 
    </div>
    <div class="form-item">
      <label for="DiabetesPedigreeFunction">Diabetes pedigree function:</label>
      <input type="number" id="DiabetesPedigreeFunction" name="DiabetesPedigreeFunction" min="0.08" max="2.42" step="0.01">
      <label for="Age">Your Age:</label>
      <input type="number" id="Age" name="Age"> 
    </div>
    

    
  </div>
  
  <div class="submit-container">
    <input type="submit" value="Submit">
  </div>
  </form>-->
  <!-- =============================== START OF FORM ============================================================== -->
  <div class="cont">
    <div class="step-row">
            <div id="progress"></div>
            <div class="step-col"><small style="color: white;">Step 1</small></div>
            <div class="step-col"><small style="color: white;">Step 2</small></div>
            <div class="step-col"><small style="color: white;">Step 3</small></div>

        </div>
        <form >
          <div class="new" id="step1" >
            <h3>DIET RECOMMENDATION</h3>
            <label for="weight">Weight (in kg):</label>
            <input type="number" id="weight" name="weight" min="0.01" step="0.01" placeholder="Weight" required>
            <label for="height">Height (in centimeters):</label>
            <input type="number" id="height" name="height" min="0.01" step="0.01" placeholder="Height" required>
            <label for="age">Your Age:</label>
            <input type="number" id="age" name="age" placeholder="Age" required>
        
            <div class="btn-box">
              <button type="button" id="Next1">Next</button> 
            </div>			
          </div>
        
          <div class="new" id="step2" onsubmit="createDropdowns()">     
            <h3>DIET RECOMMENDATION</h3> 
            <div class="disease-container">
              <label for="num_diseases">How many diseases are you suffering from?:</label>
              <input type="number" id="num_diseases" name="num_diseases" min="0" max="8" placeholder="diseases" required>
              <div id="diseases"></div>
            </div>
        
            <div class="btn-box">
              <button type="button" id="Previous1">Previous</button>
              <button type="button" id="Next2">Next</button>				 
            </div>			
          </div>
        
          <div class="new" id="step3">
            <h3>DIET RECOMMENDATION</h3>
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
              <option value="">--Gender--</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
            </select>
        
            <label for="activity_level">Select your activity level:</label>
            <select id="activity_level" name="activity_level" required>
              <option value="">--Activity Level--</option>
              <option value="Sedentary">Sedentary (little or no exercise)</option>
              <option value="Lightly">Lightly active (light exercise/sports 1-3 days/week)</option>
              <option value="Moderately">Moderately active (moderate exercise/sports 3-5 days/week)</option>
              <option value="Active">Very active (hard exercise/sports 6-7 days/week)</option>
              <option value="Extra">Extra active (very hard exercise/sports or physical job)</option>
            </select>
        
            <label for="pre_meal">Do you prefer Vegetarian or Non-vegetarian meal?:</label>
            <select id="pre_meal" name="pre_meal" required>
              <option value="">--Veg/Non-veg--</option>
              <option value="Vegetarian">Vegetarian</option>
              <option value="Non-vegetarian">Non-vegetarian</option>
            </select>
        
            <div class="btn-box">
              <button type="button" id="Previous2">Previous</button>
              <button type="submit" id="submit">Submit</button>				 
            </div>			
          </div>
        </form>

        
        

    </div>
    <div id="response-container"></div>

  <!-- =============================== END OF FORM ============================================================== -->
 <!-- ==========================================  START of FOOTER =================================== -->
 <footer>
  <div class="container footer__container">
    <div class="footer__1">
      <a href="index.html" class="footer_logo"><h4>PrediCure</h4></a>
      <p>PrediCure takes aim at preventing major diseases like obesity and diabetes before they start. It does this by analyzing your health data and creating personalized plans to keep you on the right track.</p>
    </div>

    <div class="footer__2">
       <h4>Links</h4>  <!-- == permalinks -->
      <ul class="links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="obesity_imp.html">Obesity</a></li>
        <li><a href="diabetes_imp.html">Diabetes</a></li>
        <li><a href="NutriGuide_imp.html">NutriGuide</a></li>
        <li><a href="help.html">Help</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>

    <div class="footer__3">
      <h4>Privacy</h4>
      <ul class="privacy">
        <li><a href="">Privacy Policy</a></li>
        <li><a href="">Terms and Conditions</a></li>
        <li><a href="">Refund Policy</a></li>
      </ul>
    </div>

    <div class="footer__4">
      <h4>Contact</h4>
      <div>
        <p>+91 2541657854</p>
        <p>ra@gmail.com</p>
      </div>

      <ul class="footer__socials">
        <li>
          <a href=""><i class="uil uil-facebook"></i></a>
        </li>
        <li>
          <a href=""><i class="uil uil-instagram"></i></a>
        </li>
        <li>
          <a href=""><i class="uil uil-twitter"></i></a>
        </li>
        <li>
          <a href=""><i class="uil uil-linkedin"></i></a>
        </li>
      </ul>
    </div>

  </div>
  <p>All right Reserved &#169; PrediCure,2024</p>
</footer>

<!-- ==========================================  END of FOOTER =================================== -->
<script src="{{url_for('static',filename='diet_form.js')}}" charset="utf-8"></script> 
  <script src="{{url_for('static',filename='main.js')}}" charset="utf-8"></script>      
  <!-- <script>
document.addEventListener('DOMContentLoaded', function() {
  const form = document.querySelector('form');

  form.addEventListener('submit', function(event) {
    event.preventDefault(); // Prevent the default form submission behavior

    const formData = new FormData(form); // Get form data
    const jsonData = {}; // Create an object to hold JSON data

    // Convert FormData to JSON
    for (const [key, value] of formData.entries()) {
      if (key.startsWith('disease-')) {
        // If the key starts with 'disease-', it's a disease field
        if (!jsonData['diseases']) {
          jsonData['diseases'] = []; // Initialize diseases array if not present
        }
        jsonData['diseases'].push(value); // Add disease to the array
      } else {
        jsonData[key] = value; // Add other form fields to JSON data
      }
    }

    // Make an AJAX request
    const xhr = new XMLHttpRequest();
    xhr.open('POST', 'http://localhost:5000/recommendation', true);
    xhr.setRequestHeader('Content-Type', 'application/json');

    xhr.onload = function() {
      if (xhr.status === 200) {
        console.log('Response:', xhr.responseText);
        // Handle response here
      } else {
        console.error('Error:', xhr.statusText);
      }
    };

    xhr.onerror = function() {
      console.error('Request failed');
    };

    console.log(jsonData);
    xhr.send(JSON.stringify(jsonData)); // Send modified JSON data
  });
});


  </script> -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.querySelector('form');

      form.addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission behavior

        const formData = new FormData(form); // Get form data
        const jsonData = {}; // Create an object to hold JSON data

        // Convert FormData to JSON
        for (const [key, value] of formData.entries()) {
          if (key.startsWith('disease-')) {
            if (!jsonData['diseases']) {
              jsonData['diseases'] = [];
            }
            jsonData['diseases'].push(value);
          } else {
            jsonData[key] = value;
          }
        }

        // Make an AJAX request
        const xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://localhost:5000/recommendation', true);
        xhr.setRequestHeader('Content-Type', 'application/json');

        xhr.onload = function() {
          if (xhr.status === 200) {
            const response = JSON.parse(xhr.responseText);
            const responseContainer = document.getElementById('response-container');
            responseContainer.innerHTML = '';

            const responseHeading = document.createElement('h3');
            responseHeading.textContent = 'Diet Recommendation';
            responseContainer.appendChild(responseHeading);

            // Iterate through the response object
            for (const key in response) {
              if (response.hasOwnProperty(key)) {
                // If the value is an object, iterate through its properties
                if (typeof response[key] === 'object') {
                  for (const subKey in response[key]) {
                    if (response[key].hasOwnProperty(subKey)) {
                      const para = document.createElement('p');
                      para.textContent = `${subKey}: ${response[key][subKey]}`;
                      para.classList.add('response-item'); // Add a class for styling
                      responseContainer.appendChild(para);
                    }
                  }
                } else {
                  const para = document.createElement('p');
                  para.textContent = `${key}: ${response[key]}`;
                  para.classList.add('response-item'); // Add a class for styling
                  responseContainer.appendChild(para);
                }
              }
            }
          } else {
            console.error('Error:', xhr.statusText);
          }
        };

        xhr.onerror = function() {
          console.error('Request failed');
        };

        xhr.send(JSON.stringify(jsonData));
      });
    });
  </script>
  
  
</body>

</html>